<main class="room bg_red_blue">
  <app-card-layout>
  <div class="room_content">
    <!-- HEADER -->
    <header class="lobby-header">
      <h1>üéÆ Sala de Espera</h1>
      <div class="room-info">
        <p>
          <strong>C√≥digo da Sala:</strong>
          <span class="room-code">{{ room()?.id }}</span>
        </p>
        <p>
          <strong>Jogadores:</strong>
          <span class="player-count">{{ players().length }}/2</span>
        </p>
      </div>
    </header>

    <!-- PLAYERS SECTION -->
    <div class="players_section">
      <h2>üë• Jogadores</h2>

      <div class="players_list">
        <!-- Jogador 1 -->
        <div
          *ngFor="let player of players(); let i = index"
          class="player_card"
          [class.local]="player.isLocal"
        >
          <div
            class="player-avatar"
            [style.backgroundColor]="
              (i === 0 ? 'red' : 'blue') === 'red' ? '#FF6B6B' : '#4ECDC4'
            "
          >
            {{ (i === 0 ? 'red' : 'blue') === 'red' ? 'R' : 'B' }}
          </div>

          <div class="player_info">
            <p class="player-color">
              {{ (i === 0 ? 'red' : 'blue') === 'red' ? 'Vermelho' : 'Azul' }}
            </p>
            <p *ngIf="player.isLocal" class="player-label">(Voc√™)</p>
            <p *ngIf="!player.isLocal" class="player-label">(Oponente)</p>
          </div>

          <div [ngClass]="getPlayerReadyClass(player)" class="player_status">
            <span>{{ getPlayerReadyStatus(player) }}</span>
          </div>
        </div>

        <!-- PLACEHOLDER se n√£o tem oponente -->
        <div *ngIf="players().length < 2" class="player_card placeholder">
          <div class="player_avatar empty">?</div>
          <div class="player_info">
            <p class="player-color">Aguardando...</p>
            <p class="player-label">Oponente</p>
          </div>
          <div class="player_status status-waiting">
            <span>N√£o conectado</span>
          </div>
        </div>
      </div>
    </div>

    <!-- READY SECTION -->
    <div class="ready_section">
      <button
        (click)="markPlayerReady()"
        [disabled]="isReadyButtonDisabled()"
        class="btn_ready"
        [class.ready]="isReady()"
        [class.disabled]="isReadyButtonDisabled()"
      >
        {{ getReadyButtonText() }}
      </button>

      <!-- STATUS GERAL -->
      <div class="ready_status">
        <p [ngClass]="getStatusMessageClass()" class="status_message">
          {{ getStatusMessage() }}
        </p>
      </div>
    </div>

    <!-- INFO EXTRA -->
    <div class="info_section">
      <p class="info_text">
        ‚ÑπÔ∏è Quando ambos os jogadores clicarem em "Estou Pronto", o jogo ser√°
        iniciado automaticamente.
      </p>
    </div>

    <!-- BOT√ÉO SAIR -->
    <div class="btnList">
      <button (click)="goBack()" class="btn">Sair</button>
    </div>
  </div>
  </app-card-layout>
</main>
